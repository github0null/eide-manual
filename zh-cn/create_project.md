# åˆ›å»ºé¡¹ç›® ğŸ“‚

åœ¨ Operation æ ç‚¹å‡» `æ–°å»ºé¡¹ç›®`, ä¼šå‡ºç°ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥é€‰æ‹© 3 ç§åˆ›å»ºé¡¹ç›®çš„æ–¹å¼

![](../img/op_new_prj_sel.png)

## ä» Github ä»“åº“æ‹‰å–æ¨¡æ¿å¹¶åˆ›å»ºå·¥ç¨‹ ï¼ˆå»ºè®®ä½¿ç”¨æ­¤æ–¹å¼ï¼‰

!> æ³¨æ„ï¼šç”±äºéœ€è¦è¿æ¥ Githubï¼Œè¯·ç¡®ä¿ç½‘ç»œè‰¯å¥½ï¼Œå¦åˆ™å¯èƒ½ä¼šè¿æ¥å¤±è´¥

ä½œè€…æ­£åœ¨å‘[æ¨¡æ¿ä»“åº“](https://github.com/github0null/eide-doc)ä¸æ–­å¢åŠ æ–°çš„æ¨¡æ¿å·¥ç¨‹ï¼Œè¿™å°†ä¼šä½¿åˆ›å»ºé¡¹ç›®æ›´åŠ å¿«æ·æ–¹ä¾¿

æ²¡æœ‰æ‰¾åˆ°ä½ æƒ³è¦çš„æ¨¡æ¿ï¼Ÿ è¿™é‡Œæœ‰ä¸€ä¸ª[æ¨¡æ¿å¿ƒæ„¿å•](https://discuss.em-ide.com/d/14)ï¼Œåœ¨ä¸‹æ–¹è¯„è®ºï¼Œæè¿°ä½ æƒ³è¦çš„æ¨¡æ¿ï¼Œä½œè€…ä¼šå°½å¯èƒ½å®ç°çš„

![æ¼”ç¤º](../img/quick_start.gif)

1. æ‰“å¼€ Operation æ ï¼Œç‚¹å‡» `æ–°å»ºé¡¹ç›®`, é€‰æ‹© `Get Template From Disk or Github ...` é¡¹

 ![](../img/op_new_prj_sel.png)

 ç„¶åé€‰æ‹©ä» `ç£ç›˜` æˆ–è€… [Github æ¨¡æ¿ä»“åº“](https://github.com/github0null/eide-doc) åˆ›å»ºè·å–æ¨¡æ¿.

 ![](../img/op_new_prj_tmp_online.png)

 å¦‚æœé€‰æ‹©ä» Github è·å–æ¨¡æ¿ï¼Œeide ä¼šä»é»˜è®¤ä»“åº“æ‹‰å–æ¨¡æ¿ä¿¡æ¯ï¼Œç„¶åå¼¹å‡ºå¯¹è¯æ¡†è®©ä½ é€‰æ‹©æ¨¡æ¿ï¼Œç„¶åå®Œæˆåˆ›å»º

 > æç¤ºï¼šä½ å¯ä»¥åœ¨æ’ä»¶è®¾ç½®ä¸­é…ç½®è‡ªå·±çš„æ¨¡æ¿ä»“åº“ä½ç½®ï¼Œé»˜è®¤ä½¿ç”¨ä½œè€…æä¾›çš„ä»“åº“ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶å°†è‡ªå·±çš„æ¨¡æ¿é€šè¿‡ PR åˆ†äº«åˆ°é»˜è®¤ä»“åº“

 ![](../img/op_new_prj_sel_tmp.png)

2. æ‰“å¼€åˆ›å»ºå¥½çš„é¡¹ç›®ï¼Œå¼€å§‹è¿›è¡Œä¸€äº›é¡¹ç›®çš„é…ç½®

3. å¦‚æœæ¨¡æ¿ä½¿ç”¨äº† CMSIS åŒ…ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯è·³è¿‡æ­¤æ­¥éª¤ï¼‰ï¼Œä½ éœ€è¦å…ˆä¿®æ”¹ä½ **è¦ä½¿ç”¨çš„èŠ¯ç‰‡å‹å·**

 ![](https://img-blog.csdnimg.cn/2020063000331436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODMzODEw,size_16,color_FFFFFF,t_70)

 é€šè¿‡ CMSIS åŒ…é‡Œçš„ **å®‰è£…/åˆ é™¤ å¤–è®¾ç»„ä»¶åŠŸèƒ½** æ¥ **å¯ç”¨/ç¦ç”¨ ä½ è¦ä½¿ç”¨çš„æ ‡å‡†å¤–è®¾**

 ![](https://img-blog.csdnimg.cn/20200630003830242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODMzODEw,size_16,color_FFFFFF,t_70)

4. å¼€å§‹ç¼–å†™ç¨‹åºã€‚

## ä» EIDE å†…ç½®çš„é¡¹ç›®æ¨¡æ¿åˆ›å»º

> å¦‚æœæ²¡æœ‰ç½‘ç»œï¼Œå¯¼è‡´æ— æ³•ä» Github æ¨¡æ¿åˆ›å»ºï¼Œeide ä¹Ÿæä¾›äº†ä¸€äº›å†…ç½®çš„æ¨¡æ¿ï¼Œä½†ååˆ†æœ‰é™

æ‰“å¼€ Operation æ ï¼Œç‚¹å‡» `æ–°å»ºé¡¹ç›®`, é€‰æ‹© `Create Project By Internal Template` é¡¹

![](../img/op_new_prj_sel.png)

eide ä¼šå¼¹å‡ºå¯¹è¯æ¡†è®©ä½ é€‰æ‹© `é¡¹ç›®æ¨¡æ¿`ï¼Œç„¶åæ ¹æ®ä½ é€‰æ‹©çš„æ¨¡æ¿åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é¡¹ç›®

![](../img/op_new_prj_tmp.png)

## ä»ç©ºé¡¹ç›®å¼€å§‹ï¼ˆä»¥ stm32f1 ä¸ºä¾‹ï¼‰ 

> æ³¨ï¼šä½ éœ€è¦æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶ï¼Œç»„ç»‡ä½ çš„ä»£ç å’Œæ–‡ä»¶å¤¹ç»“æ„

åœ¨å¼€å§‹ä¹‹å‰éœ€è¦ä¸‹è½½å¹¶è§£å‹ç›¸åº”èŠ¯ç‰‡çš„å¤–è®¾åº“ï¼Œæ­¤å¤„ä¸º [STM32F1 æ ‡å‡†å¤–è®¾é©±åŠ¨](https://www.st.com/content/st_com/zh/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32-standard-peripheral-libraries/stsw-stm32054.html#get-software)

### 1. åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®

 æ‰“å¼€ Operation æ ï¼Œç‚¹å‡» `æ–°å»ºé¡¹ç›®`, é€‰æ‹© `Create Empty Project` é¡¹

 ![](../img/op_new_prj_sel.png)

 eide ä¼šå¼¹å‡ºå¯¹è¯æ¡†è®©ä½ é€‰æ‹© `é¡¹ç›®ç±»å‹`ï¼Œæ­¤å¤„è¦åˆ›å»º stm32 é¡¹ç›®ï¼Œåº”è¯¥é€‰æ‹© `Empty Cortex-M Project`

 ![](../img/op_new_prj_emp.png)

 åˆ›å»ºå®Œæˆçš„é¡¹ç›®æ ¹ç›®å½•å¦‚ä¸‹

 ![](../img/prj_root.png)

### 2. åˆ›å»ºå®Œæˆä¹‹åæ‰“å¼€é¡¹ç›®ï¼Œå¼€å§‹å¤åˆ¶æ–‡ä»¶

 åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `hal` æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾åº“ï¼Œå°†è§£å‹å¥½çš„å¤–è®¾åº“ç›®å½•é‡Œçš„ Libraries/STM32F10x_StdPeriph_Driver æ–‡ä»¶å¤¹å¤åˆ¶åˆ° hal æ–‡ä»¶å¤¹å†…ï¼›

 ![](../img/prj_copy_lib.png)
 
 ç„¶åå°† Libraries/CMSIS/CM3/DeviceSupport/ST/STM32F10x/startup/arm ç›®å½•é‡Œçš„å¯åŠ¨æ–‡ä»¶ startup_stm32f10x_x.s å¤åˆ¶åˆ°é¡¹ç›®çš„ src ç›®å½•ä¸‹

 ![](../img/prj_copy_asm.png)

 å°† Libraries/CMSIS/CM3/DeviceSupport/ST/STM32F10x ç›®å½•é‡Œçš„æºæ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®çš„ hal ç›®å½•ä¸‹

 ![](../img/prj_copy_core.png)

 å°† Project/STM32F10x_StdPeriph_Examples/USART/Printf ç›®å½•ï¼ˆå¯ä»¥æ˜¯å…¶ä»–çš„ç¤ºä¾‹ç¨‹åºç›®å½•ï¼‰é‡Œçš„ ç¤ºä¾‹ç¨‹åº å¤åˆ¶åˆ° src æ–‡ä»¶å¤¹

 > system_stm32f10x.c å·²åœ¨ä¸Šä¸€æ­¥ä¸­å¤åˆ¶è¿‡äº†ï¼Œè¿™é‡Œä¸ç”¨å¤åˆ¶ï¼Œå› ä¸ºé‡å¤çš„æºæ–‡ä»¶åœ¨é“¾æ¥æ—¶ä¼šå¯¼è‡´ `é‡å¤çš„å®šä¹‰` è¿™ç±»é”™è¯¯

 ![](../img/prj_copy_src.png)

### 3. å°† hal æ–‡ä»¶å¤¹æ·»åŠ åˆ°é¡¹ç›®ç»“æ„ä¸­

 ![](../img/prj_add_folder.png)

 ç‚¹å‡» `install CMSIS Header` å°† CMSIS çš„å¤´æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­

 ![](../img/prj_ins_cmsis.png)

### 4. ä½¿ç”¨ **æ’é™¤åŠŸèƒ½** æ’é™¤ä¸ä½¿ç”¨çš„å¤–è®¾æºæ–‡ä»¶

 ![](../img/prj_exc_file.png)

### 5. æ ¹æ®ä½ è¦ä½¿ç”¨çš„èŠ¯ç‰‡ï¼Œæ·»åŠ ä¸€äº›å¿…è¦çš„ **å®** åˆ°é¡¹ç›®

 ![](https://img-blog.csdnimg.cn/20200629222227148.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODMzODEw,size_16,color_FFFFFF,t_70)

### 6. è®¾ç½®è¦ä½¿ç”¨çš„å·¥å…·é“¾ï¼Œæœ¬ä¾‹é€‰æ‹© AC5 (ARMCC 5),  é€‰æ‹©å¥½ CPU ç±»å‹ä¸º Cortex-M3, ç„¶åå°† `ä½¿ç”¨è‡ªå®šä¹‰çš„è„šæœ¬/UseCustomScatterFile` é€‰é¡¹è®¾ç½®ä¸º false, ç„¶åç‚¹å‡» `RAM/FLASH layout é€‰é¡¹` å¼€å§‹è®¾ç½®èŠ¯ç‰‡çš„ RAM/ROM åœ°å€ä¿¡æ¯

 ![](https://img-blog.csdnimg.cn/20200629224834568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwODMzODEw,size_16,color_FFFFFF,t_70)

 è®¾ç½®èŠ¯ç‰‡çš„åœ°å€ä¿¡æ¯ï¼Œç„¶åä¿å­˜

 ![](../img/prj_set_flash_info.png)

### 7. æ‰“å¼€ main.c å¼€å§‹ç¼–å†™ç¤ºä¾‹ä»£ç ï¼Œä¿å­˜ç„¶åç¼–è¯‘

 æœ¬å¤„çš„ç¤ºä¾‹ä»£ç ï¼š

 ```cpp
  /*
  * ************************************************
  * 
  * STM32 blink demo
  * 
  * CPU:     STM32F103C8
  * PIN:     PA0
  * 
  * ************************************************
  */

  #include "stm32f10x.h"

  void delay(int x)
  {
      for (int i = 0; i < x; i++)
      {
          // nop ;
      }
  }

  int main()
  {
      GPIO_InitTypeDef gpioDef;
      RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
      gpioDef.GPIO_Mode = GPIO_Mode_Out_PP;
      gpioDef.GPIO_Pin = GPIO_Pin_0;
      gpioDef.GPIO_Speed = GPIO_Speed_10MHz;
      GPIO_Init(GPIOA, &gpioDef);

      while (1)
      {
          GPIO_WriteBit(GPIOA, GPIO_Pin_0, !GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0));
          delay(500000);
      }
  }
 ```

 ç¼–è¯‘é¡¹ç›®ï¼š

 ![](../img/prj_build.png)

